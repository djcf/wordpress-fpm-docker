The switchboard functions as the system's vhost manager.

Vhosts are auto-generated according to three criteria:

	* If the vhost proxies a docker container (i.e. an app which follows the 12-factor-app principle and supplies its own HTTP server), dockergen detects the new container and automatically generates the nginx configuration files to add the new vhost

	* If the vhost refers to a php-fpm website, one of two things may happen:

		* If the website has its own fpm container, for example for auto-waking by systemd, the vhost is generated by ansible.

		* If the website lives as a pool inside the group fpm container, the vhost is also generated by ansible.

		In both cases the switchboard nginx loads the requested file from the host filesystem if it is a static asset; if the requested asset is a php script a small cache is checked. If the generated page is not found in the cache or if the cache is cold, nginx hands the request to either the group-fpm container, or to a systemd proxy which wakes the single-occupant fpm container.

The main host's /etc/nginx/nginx.conf configuration goes here. TO change it and then apply those changes, navigate to ../ and run the following command:

	docker-compose up -d --build switchboard